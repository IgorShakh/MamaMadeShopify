{% assign background = section.settings.background %}
{% assign text_color = section.settings.text_color %}
{% assign text_em_color = section.settings.text_em_color %}
{% assign button_background = settings.button_background %}
{% assign button_color = settings.button_text_color %}
{% assign icon = section.settings.icon %}

{%- if section.settings.enable_bar -%}
  {%- unless section.settings.home_page_only and template != 'index' -%}
    <section id="section-{{ section.id }}" data-section-id="{{ section.id }}" data-section-type="announcement-bar">
      <div class="AnnouncementBar">
        <div class="AnnouncementBar__Wrapper">
          <p class="AnnouncementBar__Content">
            {%- if section.settings.link -%}<a href="{{ section.settings.link }}">{%- endif -%}
              {{ section.settings.content }} {%- if icon != "none" -%}{%- render 'icon' with icon, classes: 'AnnouncementBar__Icon' fill: text_color -%}{%- endif -%}
            {%- if section.settings.link -%}</a>{%- endif -%}
          </p>
          <a href="javascript:;" id="AnnouncementBar__Close" class="AnnouncementBar__Close" title="Close">{%- render 'icon' with 'cross', classes: 'AnnouncementBar__Icon' fill: button_background, stroke: button_color -%}</a>
        </div>
      </div>
    </section>

    <style>
      #section-{{ section.id }} {
        background: {{ background }};
        color: {{ text_color }};
      }
      #section-{{ section.id }} .AnnouncementBar__Content em {
        color: {{ text_em_color }};
      }
    </style>

    <script>
      document.documentElement.style.setProperty('--announcement-bar-height', document.getElementById('shopify-section-announcement').offsetHeight + 'px');
    </script>
  {%- endunless -%}
{%- endif -%}

{% schema %}
{
  "name": "Announcement bar",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_bar",
      "label": "Enable bar",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "home_page_only",
      "label": "Home page only",
      "default": false
    },
    {
      "type": "color",
      "id": "background",
      "label": "Background",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "text_em_color",
      "label": "Em",
      "default": "#662480",
      "info": "Add an <em></em> tag to emphasise the wrapped words."
    },
    {
      "type": "html",
      "id": "content",
      "label": "Text",
      "default": "Announce something here"
    },
    {
      "type": "select",
      "id": "icon",
      "label": "Icon (optional)",
      "options": [
        {
            "value": "none",
            "label": "None"
        },
        {
          "value": "account",
          "label": "Account"
        },
        {
          "value": "arrow-bottom",
          "label": "Arrow bottom"
        },
        {
        "value": "arrow-left",
        "label": "Arrow left"
        },
        {
        "value": "arrow-right",
        "label": "Arrow right"
        },
        {
        "value": "arrow-top",
        "label": "Arrow top"
        },
        {
        "value": "button-arrow",
        "label": "Button arrow"
        },
        {
        "value": "cart",
        "label": "Carte"
        },
        {
        "value": "checkmark",
        "label": "Checkmark"
        },
        {
        "value": "close",
        "label": "Close"
        },
        {
        "value": "cross",
        "label": "Cross"
        },
        {
        "value": "facebook",
        "label": "Facebook"
        },
        {
        "value": "fancy",
        "label": "Fancy"
        },
        {
        "value": "gift-box",
        "label": "Gift box"
        },
        {
        "value": "instagram",
        "label": "Instagram"
        },
        {
        "value": "linkedin",
        "label": "LinkedIn"
        },
        {
        "value": "lock",
        "label": "Lock"
        },
        {
        "value": "logo",
        "label": "Logo"
        },
        {
        "value": "logo-mark",
        "label": "Logo mark"
        },
        {
        "value": "minus",
        "label": "Minus"
        },
        {
        "value": "pinterest",
        "label": "Pinterest"
        },
        {
        "value": "play",
        "label": "Play"
        },
        {
        "value": "plus",
        "label": "Plus"
        },
        {
        "value": "rss",
        "label": "Rss"
        },
        {
        "value": "sale",
        "label": "Sale"
        },
        {
        "value": "search",
        "label": "Search"
        },
        {
        "value": "search-desktop",
        "label": "Search"
        },
        {
        "value": "select-arrow",
        "label": "Select arrow"
        },
        {
        "value": "select-arrow-left",
        "label": "Select arrow left"
        },
        {
        "value": "select-arrow-right",
        "label": "Select arrow right"
        },
        {
        "value": "share",
        "label": "Share"
        },
        {
        "value": "shopify-logo",
        "label": "Shopify logo"
        },
        {
        "value": "snapchat",
        "label": "Snapchat"
        },
        {
        "value": "tumblr",
        "label": "Tumblr"
        },
        {
        "value": "twitter",
        "label": "Twitter"
        },
        {
        "value": "vimeo",
        "label": "Vimeo"
        },
        {
        "value": "youtube",
        "label": "YouTube"
        }
      ]
    },
    {
      "type": "url",
      "id": "link",
      "label": "Link"
    }
  ]
}
{% endschema %}